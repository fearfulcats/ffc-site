import{$ as u,H as g,I as h,J as j,e as k}from"./web-BookM-8l.js";const P=Symbol("store-raw"),d=Symbol("store-node"),l=Symbol("store-has"),$=Symbol("store-self");function A(e){let n;return e!=null&&typeof e=="object"&&(e[u]||!(n=Object.getPrototypeOf(e))||n===Object.prototype||Array.isArray(e))}function w(e,n=new Set){let t,o,s,c;if(t=e!=null&&e[P])return t;if(!A(e)||n.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):n.add(e);for(let r=0,f=e.length;r<f;r++)s=e[r],(o=w(s,n))!==s&&(e[r]=o)}else{Object.isFrozen(e)?e=Object.assign({},e):n.add(e);const r=Object.keys(e),f=Object.getOwnPropertyDescriptors(e);for(let i=0,O=r.length;i<O;i++)c=r[i],!f[c].get&&(s=e[c],(o=w(s,n))!==s&&(e[c]=o))}return e}function a(e,n){let t=e[n];return t||Object.defineProperty(e,n,{value:t=Object.create(null)}),t}function b(e,n,t){if(e[n])return e[n];const[o,s]=k(t,{equals:!1,internal:!0});return o.$=s,e[n]=o}function S(e){j()&&b(a(e,d),$)()}function R(e){return S(e),Reflect.ownKeys(e)}function y(e,n,t,o=!1){if(!o&&e[n]===t)return;const s=e[n],c=e.length;t===void 0?(delete e[n],e[l]&&e[l][n]&&s!==void 0&&e[l][n].$()):(e[n]=t,e[l]&&e[l][n]&&s===void 0&&e[l][n].$());let r=a(e,d),f;if((f=b(r,n,s))&&f.$(()=>t),Array.isArray(e)&&e.length!==c){for(let i=e.length;i<c;i++)(f=r[i])&&f.$();(f=b(r,"length",c))&&f.$(e.length)}(f=r[$])&&f.$()}function x(e,n){const t=Reflect.getOwnPropertyDescriptor(e,n);return!t||t.get||t.set||!t.configurable||n===u||n===d||(delete t.value,delete t.writable,t.get=()=>e[u][n],t.set=o=>e[u][n]=o),t}const F={get(e,n,t){if(n===P)return e;if(n===u)return t;if(n===h)return S(e),t;const o=a(e,d),s=o[n];let c=s?s():e[n];if(n===d||n===l||n==="__proto__")return c;if(!s){const r=Object.getOwnPropertyDescriptor(e,n),f=typeof c=="function";if(j()&&(!f||e.hasOwnProperty(n))&&!(r&&r.get))c=b(o,n,c)();else if(c!=null&&f&&c===Array.prototype[n])return(...i)=>g(()=>Array.prototype[n].apply(t,i))}return A(c)?D(c):c},has(e,n){return n===P||n===u||n===h||n===d||n===l||n==="__proto__"?!0:(j()&&b(a(e,l),n)(),n in e)},set(e,n,t){return g(()=>y(e,n,w(t))),!0},deleteProperty(e,n){return g(()=>y(e,n,void 0,!0)),!0},ownKeys:R,getOwnPropertyDescriptor:x};function D(e){let n=e[u];if(!n){Object.defineProperty(e,u,{value:n=new Proxy(e,F)});const t=Object.keys(e),o=Object.getOwnPropertyDescriptors(e),s=Object.getPrototypeOf(e),c=s!==null&&e!==null&&typeof e=="object"&&!Array.isArray(e)&&s!==Object.prototype;if(c){const r=Object.getOwnPropertyDescriptors(s);t.push(...Object.keys(r)),Object.assign(o,r)}for(let r=0,f=t.length;r<f;r++){const i=t[r];if(!(c&&i==="constructor")){if(o[i].get){const O=o[i].get.bind(n);Object.defineProperty(e,i,{get:O,configurable:!0})}if(o[i].set){const O=o[i].set;Object.defineProperty(e,i,{set:_=>g(()=>O.call(n,_)),configurable:!0})}}}}return n}function z(e,n){const t=w(e||{});return D(t)}export{z as c};
//# sourceMappingURL=store-C7wCmGoD.js.map
